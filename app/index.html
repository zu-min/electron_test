<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Sample</title>
</head>
<body>
  <p>Hello world!</p>
  <p>hogehoge hugahuga</p>

	<form name="form1">
		<p><input type="text" name="_name" value=""></p>
		<p><button id="postButton">登録</button><button id="removeButton">削除</button></p>
	</form>

</body>
</html>

<script type="text/javascript">
window.jQuery = window.$ = require("../node_modules/jquery");

const Datastore = require('nedb');
const db = new Datastore({
  filename: 'data/data.db',
  autoload: true
});

$("#postButton").on("click", function(e) {
  const elements = document.form1._name;
  if(!elements.value) return;
  db.insert({name: elements.value});
});

db.find({}, function(err, docs){
	$.each(docs, function(){
    console.log(this);
  });
});

$("#removeButton").on("click", function(e) {
  db.remove({}, { multi: true }, function(err, numRemoved){
    console.log('remove');
  });
});

</script>